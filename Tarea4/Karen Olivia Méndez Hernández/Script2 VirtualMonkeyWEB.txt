CREATE TABLE Disciplina ( 
	idDisciplina INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	nombre VARCHAR(100) NOT NULL,
	descripcion VARCHAR(100)
)
;

CREATE TABLE Especie ( 
	idEspecie INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	especie VARCHAR(100),
	descripcion VARCHAR(100)
)
;

CREATE TABLE Estado ( 
	idEstado INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	estado VARCHAR(100) NOT NULL,
	descripcion VARCHAR(100)
)
;

CREATE TABLE Institucion ( 
	idInstitucion INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	institucion VARCHAR(100) NOT NULL,
	descripcion VARCHAR(100)
)
;

CREATE TABLE Condicion( 
	idCondicion INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	condicion VARCHAR(100) NOT NULL,
	descripcion VARCHAR(100)
)
;

CREATE TABLE Grado( 
	idGrado INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	grado VARCHAR(100) NOT NULL,
	descripcion VARCHAR(100)
)
;

CREATE TABLE Anio( 
	idAnio INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	anio INTEGER NOT NULL,
	descripcion VARCHAR(100)
)
;

CREATE TABLE Subdisciplina ( 
	idSubdisciplina INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	subdisciplina VARCHAR(100) NOT NULL,
	descripcion VARCHAR(100)
)
;

CREATE TABLE Calificacion ( 
	idCalificacion INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	idTesis INTEGER,
	calificacion INTEGER,
	idUsuario INTEGER
)
;

CREATE TABLE CatalogoTesis ( 
	idTesis INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	titulo VARCHAR(100) NOT NULL,
	autor VARCHAR(100) NOT NULL,
	disciplina VARCHAR(100) NOT NULL,
	especie VARCHAR(100) NOT NULL,
	subdisciplina VARCHAR(100) NOT NULL,
grado VARCHAR(100) NOT NULL,
anio INTEGER NOT NULL,
institucion VARCHAR(100) NOT NULL,
director VARCHAR(100) NOT NULL,
condicion VARCHAR(100) NOT NULL,
estado VARCHAR(100) NOT NULL,
archivo BLOB(900)
)
;

CREATE TABLE Comentario ( 
	idComentario INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	descripcion VARCHAR(100),
	idUsuario INTEGER,
	idTesis INTEGER
)
;

CREATE TABLE MaterialExtra ( 
	idMaterialExtra INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	titulo VARCHAR(100) NOT NULL,
	idTesis INTEGER NOT NULL
)
;

CREATE TABLE RegistroEstadisticas ( 
	idRegistro INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	fechaVisita DATE NOT NULL,
	idUsuario INTEGER NOT NULL,
	idMaterialExtra INTEGER,
	idTesis INTEGER,
	Ip INTEGER
)
;

CREATE TABLE Roles ( 
	idRol INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	idUsuario INTEGER,
	descripcion VARCHAR(10)
)
;

CREATE TABLE Usuario ( 
	idUsuario INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	nombre VARCHAR(100) NOT NULL,
	correoElectronico VARCHAR(100) NOT NULL,
	genero VARCHAR(100) NOT NULL,
	ocupacion VARCHAR(100) NOT NULL,
	gradoAcademico VARCHAR(100),
	facebook VARCHAR(100),
	contrasena VARCHAR(100)
)
;


ALTER TABLE Calificacion ADD CONSTRAINT PK_Calificacion 
	PRIMARY KEY (idCalificacion)
;

ALTER TABLE Anio ADD CONSTRAINT PK_Anio  
	PRIMARY KEY (idAnio)
;

ALTER TABLE Subdisciplina ADD CONSTRAINT PK_Subdisciplina  
	PRIMARY KEY (idSubdisciplina)
;
ALTER TABLE Especie ADD CONSTRAINT PK_Especie  
	PRIMARY KEY (idEspecie)
;
ALTER TABLE Grado ADD CONSTRAINT PK_Grado  
	PRIMARY KEY (idGrado )
;
ALTER TABLE Institucion ADD CONSTRAINT PK_Institucion  
	PRIMARY KEY (idInstitucion )
;
ALTER TABLE Condicion ADD CONSTRAINT PK_Condicion  
	PRIMARY KEY (idCondicion )
;
ALTER TABLE Estado ADD CONSTRAINT PK_Estado  
	PRIMARY KEY (idEstado)
;

ALTER TABLE CatalogoTesis ADD CONSTRAINT PK_CatalogoTesis 
	PRIMARY KEY (idTesis)
;


ALTER TABLE Comentario ADD CONSTRAINT PK_Comentario 
	PRIMARY KEY (idComentario)
;


ALTER TABLE MaterialExtra ADD CONSTRAINT PK_MaterialExtra 
	PRIMARY KEY (idMaterialExtra)
;


ALTER TABLE RegistroEstadisticas ADD CONSTRAINT PK_registroEstadisticas 
	PRIMARY KEY (idRegistro)
;


ALTER TABLE Roles ADD CONSTRAINT PK_Roles 
	PRIMARY KEY (idRol)
;


ALTER TABLE Usuario ADD CONSTRAINT PK_Usuario 
	PRIMARY KEY (idUsuario)
;

ALTER TABLE Disciplina ADD CONSTRAINT PK_Disciplina 
	PRIMARY KEY (idDisciplina)
;




ALTER TABLE Calificacion ADD CONSTRAINT FK_Calificacion_CatalogoTesis 
	FOREIGN KEY (idTesis) REFERENCES CatalogoTesis (idTesis)
;

ALTER TABLE Comentario ADD CONSTRAINT FK_Comentario_CatalogoTesis 
	FOREIGN KEY (idTesis) REFERENCES CatalogoTesis (idTesis)
;

ALTER TABLE MaterialExtra ADD CONSTRAINT FK_MaterialExtra_CatalogoTesis 
	FOREIGN KEY (idTesis) REFERENCES CatalogoTesis (idTesis)
;

ALTER TABLE RegistroEstadisticas ADD CONSTRAINT FK_RegistroEstadisticas_CatalogoTesis 
	FOREIGN KEY (idTesis) REFERENCES CatalogoTesis (idTesis)
;

ALTER TABLE RegistroEstadisticas ADD CONSTRAINT FK_RegistroEstadisticas_Usuario 
	FOREIGN KEY (idUsuario) REFERENCES Usuario (idUsuario)
;

ALTER TABLE Roles ADD CONSTRAINT FK_Roles_Usuario 
	FOREIGN KEY (idUsuario) REFERENCES Usuario (idUsuario)
;
